<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mappa Interattiva a Mosaico</title>
  <!-- Inclusione dello stile Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    /* Rimuove margini/padding e assicura la copertura totale della viewport */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    /* Contenitore della mappa che occupa l'intera finestra */
    #map {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <!-- Contenitore della mappa -->
  <div id="map"></div>
  
  <!-- Inclusione della libreria Leaflet -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Parametri della griglia:
    const tileSize = 150; // dimensione in pixel di ogni immagine
    // Array con il percorso delle immagini (modifica in base ai nomi dei file nella cartella imgs)
    const images = [
      "imgs/img1.jpg",
      "imgs/img2.jpg",
      "imgs/img3.jpg",
      "imgs/img4.jpg",
      "imgs/img5.jpg",
      "imgs/img6.jpg",
      "imgs/img7.jpg",
      "imgs/img8.jpg",
      "imgs/img9.jpg"
      // Aggiungi ulteriori immagini se presenti
    ];
    
    // Definisci il numero di colonne: per esempio 3 colonne
    const columns = 3;
    // Calcola il numero di righe in base al numero totale di immagini
    const rows = Math.ceil(images.length / columns);
    
    // Dimensioni totali della mappa (in pixel)
    const mosaicWidth = columns * tileSize;
    const mosaicHeight = rows * tileSize;
    
    // Inizializza la mappa con CRS.Simple per usare coordinate in pixel
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: -1,       // zoom minimo (puoi regolare)
      maxZoom: 4,        // zoom massimo
      zoomControl: true  // attiva i controlli di zoom (pulsanti + e -)
    });
    
    // Definisci i limiti della mappa (l'intera griglia)
    const bounds = [[0, 0], [mosaicHeight, mosaicWidth]];
    
    // Centra la mappa sul centro del mosaico
    const center = [mosaicHeight / 2, mosaicWidth / 2];
    map.setView(center, 0);
    
    // Imposta i limiti della mappa per impedire di spostarsi troppo fuori dalla griglia
    map.setMaxBounds(bounds);
    
    // Per ogni immagine, calcola la sua posizione nella griglia e aggiungi un overlay
    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < columns; c++) {
        const index = r * columns + c;
        if (index >= images.length) break;
        
        // Calcola i confini del "tile" corrente:
        // Coordinate superiori sinistre: [r * tileSize, c * tileSize]
        // Coordinate inferiori destre: [(r+1) * tileSize, (c+1) * tileSize]
        const tileBounds = [
          [r * tileSize, c * tileSize],
          [(r + 1) * tileSize, (c + 1) * tileSize]
        ];
        L.imageOverlay(images[index], tileBounds).addTo(map);
      }
    }
  </script>
</body>
</html>
